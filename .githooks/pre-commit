#!/bin/sh
# pre-commit â€” enforces author identity.
# Version management is handled by release-please (see .github/workflows/release-please.yml).
# Configured via: git config core.hooksPath .githooks

REQUIRED_NAME="4i3n6"
REQUIRED_EMAIL="4i3n6@pm.me"

AUTHOR_NAME=$(git config user.name)
AUTHOR_EMAIL=$(git config user.email)

if [ "$AUTHOR_NAME" != "$REQUIRED_NAME" ] || [ "$AUTHOR_EMAIL" != "$REQUIRED_EMAIL" ]; then
    echo ""
    echo "ERROR: Commits to this repository must be authored by $REQUIRED_NAME <$REQUIRED_EMAIL>"
    echo "Current identity: $AUTHOR_NAME <$AUTHOR_EMAIL>"
    echo ""
    echo "Fix with:"
    echo "  git config user.name '$REQUIRED_NAME'"
    echo "  git config user.email '$REQUIRED_EMAIL'"
    echo ""
    exit 1
fi

exit 0
